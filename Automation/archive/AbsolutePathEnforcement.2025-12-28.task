# Task Template

---

## Delegation Prompt

---

## Role: Implementer

**Task File**: Automation/AbsolutePathEnforcement.task  
**Objective**: Require AbsolutePath usage for workspace paths to prevent traversal issues

**Role Reference**: See [Framework/Implementation.prompt.md](../Framework/Implementation.prompt.md) for workflow guidance.

### Context

Recent CLI work needs stronger guarantees that user-supplied paths remain inside the workspace. Nuke uses `AbsolutePath` for this purpose; we need to adopt a similar type and enforce its usage.

### Your Responsibilities

1. Introduce a reusable `AbsolutePath` helper (or compatible extension) for path handling.
2. Migrate path-sensitive code to use `AbsolutePath` and validate workspace boundaries.
3. Add guidance/tests to ensure future code uses the helper.

### Deliverables

- [x] **D1**: `AbsolutePath` helper added and documented
- [x] **D2**: Path-sensitive features migrated to use `AbsolutePath`
- [x] **D3**: Tests/linters guard against unsafe path handling

### Verification Steps

- [x] `dotnet build` succeeds (0 errors, 0 warnings)
- [x] `dotnet test` passes

### Reports

- Keep status/blocker reports in separate `.report` files named `AbsolutePathEnforcement.task.{ReportName}.report` alongside this task file
- Reference the report filenames here (do not inline full reports)
- Use [Planning/ProgressReport.report.template](../Planning/ProgressReport.report.template) for status updates and [Planning/BlockerReport.report.template](../Planning/BlockerReport.report.template) when blocked

### Completion Delegation

1. Update Progress Log in this file (summaries only; link to `.report` files for details).
2. Delegate to the next role using the cross-model code block when required.
3. When complete, archive to `Automation/archive/AbsolutePathEnforcement.YYYY-MM-DD.task` and update relevant inventories.

---

## Task Details

---

Status: Not Started  
Owner: Implementation Agent  
Priority: Medium  
Effort: Small  
Priority Score: 6  

## Objective

Adopt `AbsolutePath` for workspace-safe path handling and enforce it across path-sensitive code.

## Task Context

- Current state: Paths are validated ad hoc; potential traversal risks exist.
- Desired state: All path-sensitive logic uses `AbsolutePath` (or safer equivalent) with boundary checks.

## Task Deliverables

- D1: Helper introduced and documented
- D2: Code migrated to use helper
- D3: Tests/guards in place for safe path handling

## Architecture Decisions

- AD-1: Use `AbsolutePath`-style helper to normalize and validate paths.
- AD-2: Enforce root-bound paths for user-supplied inputs.

## Success Criteria

- [x] `dotnet build` succeeds (0 warnings)
- [x] `dotnet test` passes
- [x] Path-sensitive code rejects traversal attempts

## Progress Log

- 2025-12-26: Task created for AbsolutePath enforcement
- 2025-12-26: Implementation complete; AbsolutePath moved to `Xeyth.Common.IO.Paths`, path-sensitive flows migrated, tests added/passing (`dotnet test`). See AbsolutePathEnforcement.task.Implementation.report.

### Delegation

````markdown
**Task**: [Automation/AbsolutePathEnforcement.task](Automation/AbsolutePathEnforcement.task)  
**Role**: Reviewer (see [Framework/Implementation.prompt.md](../Framework/Implementation.prompt.md))  
**Target Audience**: Strategic Agent (Claude Sonnet 4.5)

Implementation complete; verification attached in task file.
````
